#
# Copyright (c) 2021 Cisco Systems, Inc and its affiliates
# All Rights reserved
#

openapi: 3.0.0
info:
  title: 'Hello World Service'
  description: 'Hello World service with support for multiple languages.'
  version: '1'
  
paths:
  #
  # Languages
  #
  '/helloworld/api/v1/languages':
    post:
      tags:
        - Languages
      summary: Creates a new langauge.
      operationId: createLanguage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Language'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Language'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
          
    get:
      tags:
        - Languages
      summary: Returns a list of languages.
      operationId: getLanguages
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Language'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      
  '/helloworld/api/v1/languages/{languageId}':
    get:
      tags:
        - Languages
      summary: Returns a language.
      operationId: getLanguage
      parameters:
        - name: languageId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Language'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'        
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'  
          
    put:
      tags:
        - Languages
      summary: Updates a langauge.
      operationId: updateLanguage
      parameters:
        - name: languageId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Language'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Language'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'        
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'  
  
    delete:
      tags:
        - Languages
      summary: Deletes a langauge.
      operationId: deleteLanguage
      parameters:
        - name: languageId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          $ref: '#/components/responses/204'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'        
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'  

  #
  # Items
  #
  '/helloworld/api/v1/items':
    post:
      tags:
        - Items
      summary: Creates a new Hello World item.
      operationId: createItem
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Item'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
          
    get:
      tags:
        - Items
      summary: Returns a list of Hello World items.
      operationId: getItems
      parameters:
        - name: languageId
          in: query
          schema: 
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Item'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      
  '/helloworld/api/v1/items/{itemId}':
    get:
      tags:
        - Items
      summary: Returns a Hello World item.
      operationId: getItem
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'        
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'  
          
    put:
      tags:
        - Items
      summary: Updates a Hello World item.
      operationId: updateItem
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Item'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'        
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'  
  
    delete:
      tags:
        - Items
      summary: Deletes a Hello World item.
      operationId: deleteItem
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          $ref: '#/components/responses/204'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'        
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'  
  
components:
  schemas:
    Language:
      type: object
      required:
        - name
      properties: 
        id: 
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          minLength: 2
          maxLength: 128
        description:
          type: string
          maxLength: 512
    
    Item:
      type: object
      required:
        - languageId
        - value
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        languageId:
          type: string
          format: uuid
        languageName:
          type: string
          readOnly: true
        value: 
          type: string
          minLength: 2
          maxLength: 128
          
    Error:
      type: object
      properties:
        code:
          type: string
          readOnly: true
        message:
          type: string
          readOnly: true
  
  responses:
    204:
      description: No Content
      
    400:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'

    401:
      description: Unauthenticated
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'    
            
    403:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'    
            
    404:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'          
    409:
      description: Conflict
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error' 
            
    500: 
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
